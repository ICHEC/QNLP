<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QNLP: /Users/mlxd/Desktop/intel-qnlp-rc2/modules/py/pkgs/QNLP/proc/process_corpus.py Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QNLP
   &#160;<span id="projectnumber">v1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('a00113_source.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">process_corpus.py</div>  </div>
</div><!--header-->
<div class="contents">
<a href="a00113.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno"><a class="line" href="a00204.html">    1</a></span>&#160;<span class="comment"># Convert corpus to non-zero state coefficients for quantum encoding</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="keyword">import</span> <a class="code" href="a00207.html">QNLP.tagging</a> <span class="keyword">as</span> tg</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="keyword">import</span> os</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="keyword">import</span> nltk</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="keyword">import</span> sys</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"># DB for exporting data to be read into C++</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="keyword">import</span> <a class="code" href="a00198.html">QNLP.io.qnlp_db</a> <span class="keyword">as</span> qdb</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="keyword">from</span> collections <span class="keyword">import</span> Counter</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="keyword">from</span> nltk.corpus <span class="keyword">import</span> stopwords</div><div class="line"><a name="l00015"></a><span class="lineno"><a class="line" href="a00204.html#ab3579925436fee3861150f3bc23da61a">   15</a></span>&#160;sw = stopwords.words(<span class="stringliteral">&#39;english&#39;</span>)</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno"><a class="line" href="a00204.html#a30e894d5d8c8016bf9a1df8e6b1b4cde">   19</a></span>&#160;<span class="keyword">def </span><a class="code" href="a00204.html#a30e894d5d8c8016bf9a1df8e6b1b4cde">remove_stopwords</a>(text, sw):</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;Remove words that do not add to the meaning; simplifies sentences&quot;&quot;&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;    <span class="keywordflow">return</span> [w <span class="keywordflow">for</span> w <span class="keywordflow">in</span> text <span class="keywordflow">if</span> w <span class="keywordflow">not</span> <span class="keywordflow">in</span> sw]</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="a00204.html#ab7d60c52b39b449b1b4d6459b0544769">   25</a></span>&#160;<span class="keyword">def </span><a class="code" href="a00204.html#ab7d60c52b39b449b1b4d6459b0544769">tokenize_corpus</a>(corpus, proc_mode=0, stop_words=True):</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="stringliteral">    Pass the corpus as a string, which is subsequently broken into tokenized sentences, and returned as dictionary of verbs, nouns, tokenized words, and tokenized sentences.</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="stringliteral">    Keyword arguments:</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="stringliteral">    corpus      -- string representing the corpus to tokenize</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="stringliteral">    proc_mode   -- defines the processing mode. Lemmatization: proc_mode=\&quot;l\&quot;;  Stemming: proc_mode=\&quot;s\&quot;; No additional processing: proc_mode=0 (default=0)</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="stringliteral">    stop_words  -- indicates whether stop words should be removed (False) or kept (True) (from nltk.corpus.stopwords.words(\&quot;english\&quot;))</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    token_sents = nltk.sent_tokenize(corpus) <span class="comment">#Split on sentences</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    token_words = [] <span class="comment"># Individual words</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    tags = [] <span class="comment"># Words and respective tags</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="keywordflow">for</span> s <span class="keywordflow">in</span> token_sents:</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        tk = nltk.word_tokenize(s)</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        <span class="keywordflow">if</span> stop_words == <span class="keyword">False</span>:</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;            tk = <a class="code" href="a00204.html#a30e894d5d8c8016bf9a1df8e6b1b4cde">remove_stopwords</a>(tk, sw)</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        token_words.extend(tk)</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        tags.extend(nltk.pos_tag(tk))</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordflow">if</span> proc_mode != 0:</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        <span class="keywordflow">if</span> proc_mode == <span class="stringliteral">&#39;s&#39;</span>:</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;            s = nltk.SnowballStemmer(<span class="stringliteral">&#39;english&#39;</span>, ignore_stopwords = <span class="keywordflow">not</span> stop_words)</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;            token_words = [s.stem(t) <span class="keywordflow">for</span> t <span class="keywordflow">in</span> token_words]</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        <span class="keywordflow">elif</span> proc_mode == <span class="stringliteral">&#39;l&#39;</span>:</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;            wnl = nltk.WordNetLemmatizer()</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;            token_words = [wnl.lemmatize(t) <span class="keywordflow">for</span> t <span class="keywordflow">in</span> token_words]</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    tags = nltk.pos_tag(token_words)</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    nouns = [i[0] <span class="keywordflow">for</span> i <span class="keywordflow">in</span> tags <span class="keywordflow">if</span> tg.matchables(tg.Noun, i[1])]</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    verbs = [i[0] <span class="keywordflow">for</span> i <span class="keywordflow">in</span> tags <span class="keywordflow">if</span> tg.matchables(tg.Verb, i[1])]</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    count_nouns = Counter(nouns)</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    count_verbs = Counter(verbs)</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordflow">return</span> {<span class="stringliteral">&#39;verbs&#39;</span>:count_verbs, <span class="stringliteral">&#39;nouns&#39;</span>:count_nouns, <span class="stringliteral">&#39;tk_sentence&#39;</span>:token_sents, <span class="stringliteral">&#39;tk_words&#39;</span>:token_words}</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="a00204.html#a87fc06912391fb540b90e561eec6cbaa">   65</a></span>&#160;<span class="keyword">def </span><a class="code" href="a00204.html#a87fc06912391fb540b90e561eec6cbaa">load_corpus</a>(corpus_path, proc_mode=0):</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;Load the corpus from disk.&quot;&quot;&quot;</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    corpus_text=<span class="stringliteral">&quot;&quot;</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keyword">with</span> open(corpus_path, <span class="stringliteral">&#39;r&#39;</span>) <span class="keyword">as</span> corpusFile:</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        corpus_text=corpusFile.read()</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">return</span> corpus_text</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="a00204.html#a7fc2f289137c1f1d44887e2f0cb2dc5e">   72</a></span>&#160;<span class="keyword">def </span><a class="code" href="a00204.html#a7fc2f289137c1f1d44887e2f0cb2dc5e">process</a>(corpus_path, proc_mode=0):</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;Tokenize the corpus data.&quot;&quot;&quot;</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    words = <a class="code" href="a00204.html#ab7d60c52b39b449b1b4d6459b0544769">tokenize_corpus</a>(<a class="code" href="a00204.html#a87fc06912391fb540b90e561eec6cbaa">load_corpus</a>(corpus_path), proc_mode=proc_mode)</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keywordflow">return</span> words</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="a00204.html#ad5b59596d9af2489b319190d18099cd7">   79</a></span>&#160;<span class="keyword">def </span><a class="code" href="a00204.html#ad5b59596d9af2489b319190d18099cd7">word_pairing</a>(words, window_size):</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="stringliteral">    Examine the words around each verb with the specified window size, and attempt to match the NVN pattern. The window_size specifies the number of values around each verb to search for the matching nouns. If passed as tuple</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="stringliteral">    (l,r) gives the left and right windows separately. If passed as a scalar, both values are equal.</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="stringliteral">    Keyword arguments:</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="stringliteral">    words       -- list of the tokenized words</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="stringliteral">    window_size -- window to search for word pairings. Tuple</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="comment">#Naively set sentence boundary at location of full-stops.</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    sentence_boundary = set([i <span class="keywordflow">for</span> i, x <span class="keywordflow">in</span> enumerate(words[<span class="stringliteral">&#39;tk_words&#39;</span>]) <span class="keywordflow">if</span> <span class="stringliteral">&quot;.&quot;</span> <span class="keywordflow">in</span> x])</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">if</span> type(window_size) <span class="keywordflow">is</span> tuple:</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        window_left, window_right = window_size</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        window_left = window_size</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        window_right = window_size</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    verb_idx={}</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    </div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">for</span> v <span class="keywordflow">in</span> words[<span class="stringliteral">&#39;verbs&#39;</span>]:</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        verb_idx.update({v:[i <span class="keywordflow">for</span> i, x <span class="keywordflow">in</span> enumerate(words[<span class="stringliteral">&#39;tk_words&#39;</span>]) <span class="keywordflow">if</span> v <span class="keywordflow">in</span> x]})</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    </div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">for</span> n <span class="keywordflow">in</span> words[<span class="stringliteral">&#39;nouns&#39;</span>]:</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keywordflow">for</span> v,k <span class="keywordflow">in</span> verb_idx.items():</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            <span class="keywordflow">for</span> v_idx <span class="keywordflow">in</span> k:</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                <span class="comment">#Ensure that no full stop appears over the windowed region to avoid crossing sentences.</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                l_left = len(sentence_boundary.intersection(range(v_idx-window_left,v_idx)))</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                l_right = len(sentence_boundary.intersection(range(v_idx,v_idx+window_right)))</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                </div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                <span class="keywordflow">if</span> l_left==0 <span class="keywordflow">and</span> n <span class="keywordflow">in</span> words[<span class="stringliteral">&#39;tk_words&#39;</span>][v_idx-window_left:v_idx]:</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                    print(<span class="stringliteral">&quot;LEFT:=&quot;</span>,n,v)</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                <span class="keywordflow">if</span> l_right==0 <span class="keywordflow">and</span> (v_idx + window_right) &lt; len(words[<span class="stringliteral">&#39;tk_words&#39;</span>]) <span class="keywordflow">and</span> n <span class="keywordflow">in</span> words[<span class="stringliteral">&#39;tk_words&#39;</span>][v_idx:v_idx+window_right] :</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                    print(<span class="stringliteral">&quot;RIGHT:=&quot;</span>,v,n)</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="a00204.html#a885a2a5d83bbeb69544d6d99f5228d7e">  116</a></span>&#160;<span class="keyword">def </span><a class="code" href="a00204.html#a885a2a5d83bbeb69544d6d99f5228d7e">num_qubits</a>(words):</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="stringliteral">    Calculate the required number of qubits to encode the NVN state-space of the corpus.</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="stringliteral">    Returns tuple of required states and number of needed qubits. </span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="stringliteral">    While it is possible to reduce qubit count by considering the total required number as being the product of each combo, it is easier to deal with separate states for nouns and verbs, with at most 1 extra qubit required.</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="stringliteral">    </span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="stringliteral">    Keyword arguments:</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="stringliteral">    words       -- list of the tokenized words</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    nvn_space_size = len(words[<span class="stringliteral">&#39;nouns&#39;</span>])**2 * len(words[<span class="stringliteral">&#39;verbs&#39;</span>])</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    req_qubits_n = int(np.ceil(np.log2(len(words[<span class="stringliteral">&#39;nouns&#39;</span>]))))</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    req_qubits_v = int(np.ceil(np.log2(len(words[<span class="stringliteral">&#39;verbs&#39;</span>]))))</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    </div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="comment">#req_qubits = int(np.ceil(np.log2(nvn_space_size)))</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    req_qubits = req_qubits_n*2 + req_qubits_v</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    </div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    print(<span class="stringliteral">&quot;Unique states:&quot;</span>,nvn_space_size,<span class="stringliteral">&quot;\tRequired qubits total:&quot;</span>, req_qubits,           <span class="stringliteral">&quot;\tRequired qubits nouns:&quot;</span>, req_qubits_n, <span class="stringliteral">&quot;\tRequired qubits verbs:&quot;</span>, req_qubits_v)</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">return</span> (nvn_space_size, req_qubits, req_qubits_n, req_qubits_v)</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="a00204.html#ac29b988c860aa73ef28372c028d35d4c">  135</a></span>&#160;<span class="keyword">def </span><a class="code" href="a00204.html#ac29b988c860aa73ef28372c028d35d4c">mapNameToBinaryBasis</a>(words, db_name, table_name=&quot;qnlp&quot;):</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="stringliteral">    Maps the unique string in each respective space to a binary basis number for qubit representation.</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="stringliteral">    Keyword arguments:</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="stringliteral">    words       -- list of the tokenized words</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="stringliteral">    db_name     -- name of the database file</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="stringliteral">    table_name  -- name of the table to store data in db_name</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="stringliteral">    &quot;&quot;&quot;</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    _, num_q_total, num_q_n, num_q_v = <a class="code" href="a00204.html#a885a2a5d83bbeb69544d6d99f5228d7e">num_qubits</a>(words)</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    verbMap = {}</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    nounMap = {}</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">for</span> i,v <span class="keywordflow">in</span> enumerate(words[<span class="stringliteral">&#39;nouns&#39;</span>]):</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="comment">#Perform two-way mapping for bin to value and value to bin</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        nounMap.update({v:format(i,<span class="stringliteral">&#39;b&#39;</span>).zfill(num_q_n)})</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        nounMap.update({format(i,<span class="stringliteral">&#39;b&#39;</span>).zfill(num_q_n):v})</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">for</span> i,v <span class="keywordflow">in</span> enumerate(words[<span class="stringliteral">&#39;verbs&#39;</span>]):</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        verbMap.update({v:format(i,<span class="stringliteral">&#39;b&#39;</span>).zfill(num_q_v)})</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        verbMap.update({format(i,<span class="stringliteral">&#39;b&#39;</span>).zfill(num_q_v):v})</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        </div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    db = qdb.qnlp_db(db_name, <span class="stringliteral">&quot;.&quot;</span>)</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    db.db_insert(nounMap, <span class="stringliteral">&quot;noun&quot;</span>, table_name)</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    db.db_insert(verbMap, <span class="stringliteral">&quot;verb&quot;</span>, table_name)</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    </div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">return</span> (nounMap, verbMap)</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="a00204.html#a4d8cd235f5edefdedcb24173055354a0">  167</a></span>&#160;<span class="keyword">def </span><a class="code" href="a00204.html#a4d8cd235f5edefdedcb24173055354a0">run</a>(BasisPath, CorpusPath, proc_mode=0, db_name=&quot;qnlp_tagged_corpus&quot;):</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="comment"># Load the basis words</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    basis_text=<span class="stringliteral">&quot;&quot;</span>    </div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment"># Load the corpus</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    corpus_text=<span class="stringliteral">&quot;&quot;</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="keyword">with</span> open(BasisPath, <span class="stringliteral">&#39;r&#39;</span>) <span class="keyword">as</span> basisFile:</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        basis_text=basisFile.read()</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keyword">with</span> open(CorpusPath, <span class="stringliteral">&#39;r&#39;</span>) <span class="keyword">as</span> corpusFile:</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        corpus_text=corpusFile.read()</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    basis_words = <a class="code" href="a00204.html#ab7d60c52b39b449b1b4d6459b0544769">tokenize_corpus</a>(basis_text, proc_mode=proc_mode)</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    corpus_words = <a class="code" href="a00204.html#ab7d60c52b39b449b1b4d6459b0544769">tokenize_corpus</a>(corpus_text, proc_mode=proc_mode)</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="comment">#Naively set sentence boundary at location of full-stops.</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    sentence_boundary = set([i <span class="keywordflow">for</span> i, x <span class="keywordflow">in</span> enumerate(corpus_words[<span class="stringliteral">&#39;tk_words&#39;</span>]) <span class="keywordflow">if</span> <span class="stringliteral">&quot;.&quot;</span> <span class="keywordflow">in</span> x])</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="comment"># examine word windowing for proximity</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="comment">#window = (2,3)</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    window=1</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <a class="code" href="a00204.html#ad5b59596d9af2489b319190d18099cd7">word_pairing</a>(basis_words, window)</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="comment"># Determine qubit requirements</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    _, num_q_total, num_q_n, num_q_v = <a class="code" href="a00204.html#a885a2a5d83bbeb69544d6d99f5228d7e">num_qubits</a>(basis_words)</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="comment">#Map basis words to binary strings, and populate DB</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    basis_nMap, basis_vMap = <a class="code" href="a00204.html#ac29b988c860aa73ef28372c028d35d4c">mapNameToBinaryBasis</a>(basis_words, db_name, <span class="stringliteral">&quot;basis&quot;</span>)</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    corpus_nMap, corpus_vMap = <a class="code" href="a00204.html#ac29b988c860aa73ef28372c028d35d4c">mapNameToBinaryBasis</a>(corpus_words, db_name, <span class="stringliteral">&quot;corpus&quot;</span>)</div><div class="ttc" id="a00204_html_ad5b59596d9af2489b319190d18099cd7"><div class="ttname"><a href="a00204.html#ad5b59596d9af2489b319190d18099cd7">QNLP.proc.process_corpus.word_pairing</a></div><div class="ttdeci">def word_pairing(words, window_size)</div><div class="ttdef"><b>Definition:</b> <a href="a00113_source.html#l00079">process_corpus.py:79</a></div></div>
<div class="ttc" id="a00204_html_a885a2a5d83bbeb69544d6d99f5228d7e"><div class="ttname"><a href="a00204.html#a885a2a5d83bbeb69544d6d99f5228d7e">QNLP.proc.process_corpus.num_qubits</a></div><div class="ttdeci">def num_qubits(words)</div><div class="ttdef"><b>Definition:</b> <a href="a00113_source.html#l00116">process_corpus.py:116</a></div></div>
<div class="ttc" id="a00204_html_a30e894d5d8c8016bf9a1df8e6b1b4cde"><div class="ttname"><a href="a00204.html#a30e894d5d8c8016bf9a1df8e6b1b4cde">QNLP.proc.process_corpus.remove_stopwords</a></div><div class="ttdeci">def remove_stopwords(text, sw)</div><div class="ttdef"><b>Definition:</b> <a href="a00113_source.html#l00019">process_corpus.py:19</a></div></div>
<div class="ttc" id="a00204_html_ac29b988c860aa73ef28372c028d35d4c"><div class="ttname"><a href="a00204.html#ac29b988c860aa73ef28372c028d35d4c">QNLP.proc.process_corpus.mapNameToBinaryBasis</a></div><div class="ttdeci">def mapNameToBinaryBasis(words, db_name, table_name=&quot;qnlp&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="a00113_source.html#l00135">process_corpus.py:135</a></div></div>
<div class="ttc" id="a00204_html_ab7d60c52b39b449b1b4d6459b0544769"><div class="ttname"><a href="a00204.html#ab7d60c52b39b449b1b4d6459b0544769">QNLP.proc.process_corpus.tokenize_corpus</a></div><div class="ttdeci">def tokenize_corpus(corpus, proc_mode=0, stop_words=True)</div><div class="ttdef"><b>Definition:</b> <a href="a00113_source.html#l00025">process_corpus.py:25</a></div></div>
<div class="ttc" id="a00204_html_a7fc2f289137c1f1d44887e2f0cb2dc5e"><div class="ttname"><a href="a00204.html#a7fc2f289137c1f1d44887e2f0cb2dc5e">QNLP.proc.process_corpus.process</a></div><div class="ttdeci">def process(corpus_path, proc_mode=0)</div><div class="ttdef"><b>Definition:</b> <a href="a00113_source.html#l00072">process_corpus.py:72</a></div></div>
<div class="ttc" id="a00204_html_a4d8cd235f5edefdedcb24173055354a0"><div class="ttname"><a href="a00204.html#a4d8cd235f5edefdedcb24173055354a0">QNLP.proc.process_corpus.run</a></div><div class="ttdeci">def run(BasisPath, CorpusPath, proc_mode=0, db_name=&quot;qnlp_tagged_corpus&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="a00113_source.html#l00167">process_corpus.py:167</a></div></div>
<div class="ttc" id="a00198_html"><div class="ttname"><a href="a00198.html">QNLP.io.qnlp_db</a></div><div class="ttdef"><b>Definition:</b> <a href="a00098_source.html#l00001">qnlp_db.py:1</a></div></div>
<div class="ttc" id="a00204_html_a87fc06912391fb540b90e561eec6cbaa"><div class="ttname"><a href="a00204.html#a87fc06912391fb540b90e561eec6cbaa">QNLP.proc.process_corpus.load_corpus</a></div><div class="ttdeci">def load_corpus(corpus_path, proc_mode=0)</div><div class="ttdef"><b>Definition:</b> <a href="a00113_source.html#l00065">process_corpus.py:65</a></div></div>
<div class="ttc" id="a00207_html"><div class="ttname"><a href="a00207.html">QNLP.tagging</a></div><div class="ttdef"><b>Definition:</b> <a href="a01322_source.html#l00001">__init__.py:1</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_da17d78632561013a94c09e29a703cf4.html">intel-qnlp-rc2</a></li><li class="navelem"><a class="el" href="dir_1ee3393be4a977752a56b41968766bfc.html">modules</a></li><li class="navelem"><a class="el" href="dir_f079078911bee6a986813e8b27e07cbe.html">py</a></li><li class="navelem"><a class="el" href="dir_51144f5f02519da1d43468600f8a00bf.html">pkgs</a></li><li class="navelem"><a class="el" href="dir_2d0cb88513d4e96f5474be15e02cdeb6.html">QNLP</a></li><li class="navelem"><a class="el" href="dir_ee79a3724bb57599991c6f24381e00b6.html">proc</a></li><li class="navelem"><a class="el" href="a00113.html">process_corpus.py</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
