<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QNLP: QNLP.proc.DisCoCat.DisCoCat Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QNLP
   &#160;<span id="projectnumber">v1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('a00859.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">QNLP.proc.DisCoCat.DisCoCat Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for QNLP.proc.DisCoCat.DisCoCat:</div>
<div class="dyncontent">
<div class="center"><img src="a00857.png" border="0" usemap="#_q_n_l_p_8proc_8_dis_co_cat_8_dis_co_cat_coll__map" alt="Collaboration graph"/></div>
<map name="_q_n_l_p_8proc_8_dis_co_cat_8_dis_co_cat_coll__map" id="_q_n_l_p_8proc_8_dis_co_cat_8_dis_co_cat_coll__map">
<area shape="rect"  title=" " alt="" coords="5,5,215,215"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a966b9d9ea2aa71e77450a6943e3b0cd6"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00859.html#a966b9d9ea2aa71e77450a6943e3b0cd6">__init__</a> (self, fd=lambda x :[1.0/(i+1) for i in x])</td></tr>
<tr class="separator:a966b9d9ea2aa71e77450a6943e3b0cd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f8112d1c5eebf8543f9d5b1017d3b0a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00859.html#a6f8112d1c5eebf8543f9d5b1017d3b0a">load_corpus</a> (self, corpus_path)</td></tr>
<tr class="separator:a6f8112d1c5eebf8543f9d5b1017d3b0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a548c331a9e1989983fe90f540388d8de"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00859.html#a548c331a9e1989983fe90f540388d8de">tokenise_corpus</a> (self, corpus_text)</td></tr>
<tr class="separator:a548c331a9e1989983fe90f540388d8de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79ae71fef806455de230891bc588095b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00859.html#a79ae71fef806455de230891bc588095b">word_occurrence</a> (self, list corpus_list)</td></tr>
<tr class="separator:a79ae71fef806455de230891bc588095b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85b07cbdc41859f5f0431d34b658dc9d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00859.html#a85b07cbdc41859f5f0431d34b658dc9d">define_basis_words</a> (self, dict word_dict, int max_words)</td></tr>
<tr class="separator:a85b07cbdc41859f5f0431d34b658dc9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2595a186c32d0e3ba273c772a98cddf0"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00859.html#a2595a186c32d0e3ba273c772a98cddf0">map_to_basis</a> (self, dict corpus_list, list basis, basis_dist_cutoff=10, <a class="el" href="a00859.html#a72bda5e9e7a69b86b6e303283438dd13">distance_func</a>=None)</td></tr>
<tr class="memdesc:a2595a186c32d0e3ba273c772a98cddf0"><td class="mdescLeft">&#160;</td><td class="mdescRight">from multimethod import multimethod #Allow multiple dispatch  <a href="#a2595a186c32d0e3ba273c772a98cddf0">More...</a><br /></td></tr>
<tr class="separator:a2595a186c32d0e3ba273c772a98cddf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27b28891df185baa1a32ce18ab745139"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00859.html#a27b28891df185baa1a32ce18ab745139">nvn_distances</a> (self, dict corpus_list_n, dict corpus_list_v, dist_cutoff=2, <a class="el" href="a00859.html#a72bda5e9e7a69b86b6e303283438dd13">distance_func</a>=None)</td></tr>
<tr class="separator:a27b28891df185baa1a32ce18ab745139"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55d9ca6751919c22f739d00037be7b1c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00859.html#a55d9ca6751919c22f739d00037be7b1c">map_to_bitstring</a> (self, list basis)</td></tr>
<tr class="separator:a55d9ca6751919c22f739d00037be7b1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9294e7290c3b52fd43563aea1fdae3d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00859.html#af9294e7290c3b52fd43563aea1fdae3d">generate_state_mapping</a> (self, bit_map, dat_map)</td></tr>
<tr class="separator:af9294e7290c3b52fd43563aea1fdae3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e7857535e1ff978530dbde402ab77dd"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00859.html#a8e7857535e1ff978530dbde402ab77dd">latex_states</a> (self, bit_map, dat_map, file_name=&quot;state&quot;)</td></tr>
<tr class="separator:a8e7857535e1ff978530dbde402ab77dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a72bda5e9e7a69b86b6e303283438dd13"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00859.html#a72bda5e9e7a69b86b6e303283438dd13">distance_func</a></td></tr>
<tr class="separator:a72bda5e9e7a69b86b6e303283438dd13"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><pre class="fragment">Implements precomputation for the DisCo(Cat) model to represent sentence meanings
using category theory methods. See &lt;PAPERS&gt; for details.
</pre> 
<p class="definition">Definition at line <a class="el" href="a00104_source.html#l00095">95</a> of file <a class="el" href="a00104_source.html">DisCoCat.py</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a966b9d9ea2aa71e77450a6943e3b0cd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a966b9d9ea2aa71e77450a6943e3b0cd6">&#9670;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def QNLP.proc.DisCoCat.DisCoCat.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>fd</em> = <code>lambda&#160;x&#160;:&#160;[1.0/(i+1)&#160;for&#160;i&#160;in&#160;x]</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00104_source.html#l00100">100</a> of file <a class="el" href="a00104_source.html">DisCoCat.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keyword">def </span>__init__(self, fd = lambda x : [1.0/(i+1) <span class="keywordflow">for</span> i <span class="keywordflow">in</span> x]):</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        self.distance_func = fd</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a85b07cbdc41859f5f0431d34b658dc9d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a85b07cbdc41859f5f0431d34b658dc9d">&#9670;&nbsp;</a></span>define_basis_words()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def QNLP.proc.DisCoCat.DisCoCat.define_basis_words </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dict&#160;</td>
          <td class="paramname"><em>word_dict</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_words</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Chooses the max_words number of most common words from word_dict
and return as list for use as basis.
</pre> 
<p class="definition">Definition at line <a class="el" href="a00104_source.html#l00126">126</a> of file <a class="el" href="a00104_source.html">DisCoCat.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="keyword">def </span>define_basis_words(self, word_dict : dict, max_words : int):</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="stringliteral">        Chooses the max_words number of most common words from word_dict</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="stringliteral">        and return as list for use as basis.</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        k = list(word_dict.keys())</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        v = list(word_dict.values())</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        res_list = []</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(max_words):</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            max_val = max(v)</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            val_idx = v.index(max_val)</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            res_list.append((k[val_idx],max_val))</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            k.remove(k[val_idx])</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            v.remove(max_val)</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <span class="keywordflow">return</span> res_list</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="af9294e7290c3b52fd43563aea1fdae3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9294e7290c3b52fd43563aea1fdae3d">&#9670;&nbsp;</a></span>generate_state_mapping()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def QNLP.proc.DisCoCat.DisCoCat.generate_state_mapping </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bit_map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dat_map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Takes the basis bitstring map, and the token-to-basis relationship, and returns a normalised set of states, with coefficients determined by the distance_func lambda, given the distance between the token and the resulting basis element.
</pre> 
<p class="definition">Definition at line <a class="el" href="a00104_source.html#l00238">238</a> of file <a class="el" href="a00104_source.html">DisCoCat.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="keyword">def </span>generate_state_mapping(self, bit_map, dat_map):</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="stringliteral">        Takes the basis bitstring map, and the token-to-basis relationship, and returns a normalised set of states, with coefficients determined by the distance_func lambda, given the distance between the token and the resulting basis element.</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        num_states = bit_map[0]</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="comment"># Mapping token to array of tuples, first index the basis state coefficient and second the integer representation of the bitstring state</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        state_encoding = {}</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordflow">for</span> token, basis_dist_map <span class="keywordflow">in</span> dat_map.items():</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            local_coeffs = []</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            local_states = []</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            <span class="keywordflow">for</span> basis_token, distance_list <span class="keywordflow">in</span> basis_dist_map.items():</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                <span class="comment"># If more than one occurrence for the same word, apply the distance relation function then sum the results for that basis work coefficient</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                local_coeffs.append( np.sum( self.distance_func(distance_list) ) )</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                local_states.append( bit_map[1][basis_token] )</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            <span class="comment"># Calc normalisation factor over all the respective basis states for a given token</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            norm_factor = np.linalg.norm(local_coeffs)</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            <span class="keywordflow">for</span> state_idx <span class="keywordflow">in</span> range( len(local_states) ):</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                <span class="comment"># Normalise the coefficient</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                local_coeffs[state_idx] /= norm_factor</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                current = state_encoding.get(token)</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                <span class="keywordflow">if</span> current != <span class="keywordtype">None</span>:</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                    current.append( (local_coeffs[state_idx], local_states[state_idx],) )</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                <span class="keywordflow">else</span>:</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                    state_encoding.update({token : [(local_coeffs[state_idx], local_states[state_idx],)] })</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="keywordflow">return</span> state_encoding</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div></div><!-- fragment -->
<p class="reference">References <a class="el" href="a00104_source.html#l00101">QNLP.proc.DisCoCat.DisCoCat.distance_func</a>.</p>

<p class="reference">Referenced by <a class="el" href="a00104_source.html#l00268">QNLP.proc.DisCoCat.DisCoCat.latex_states()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="a00859_af9294e7290c3b52fd43563aea1fdae3d_icgraph.png" border="0" usemap="#a00859_af9294e7290c3b52fd43563aea1fdae3d_icgraph" alt=""/></div>
<map name="a00859_af9294e7290c3b52fd43563aea1fdae3d_icgraph" id="a00859_af9294e7290c3b52fd43563aea1fdae3d_icgraph">
<area shape="rect"  title=" " alt="" coords="243,5,436,47"/>
<area shape="rect"  href="a00859.html#a8e7857535e1ff978530dbde402ab77dd" title=" " alt="" coords="5,5,195,47"/>
</map>
</div>

</div>
</div>
<a id="a8e7857535e1ff978530dbde402ab77dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e7857535e1ff978530dbde402ab77dd">&#9670;&nbsp;</a></span>latex_states()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def QNLP.proc.DisCoCat.DisCoCat.latex_states </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>bit_map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dat_map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>file_name</em> = <code>&quot;state&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">LaTeX file outputter for state generation. Given the above data structures, file_name.tex is generated. Beware, as output may need to replace '_' with '\_' for non-math-mode usage.
</pre> 
<p class="definition">Definition at line <a class="el" href="a00104_source.html#l00268">268</a> of file <a class="el" href="a00104_source.html">DisCoCat.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keyword">def </span>latex_states(self, bit_map, dat_map, file_name = &quot;state&quot;):</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="stringliteral">        LaTeX file outputter for state generation. Given the above data structures, file_name.tex is generated. Beware, as output may need to replace &#39;_&#39; with &#39;\_&#39; for non-math-mode usage.</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        mapping = self.generate_state_mapping(bit_map, dat_map)</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="keyword">with</span> open(file_name + <span class="stringliteral">&quot;.tex&quot;</span>, <span class="stringliteral">&quot;w&quot;</span>) <span class="keyword">as</span> f:</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            f.write(<span class="stringliteral">&quot;\\documentclass{article} \n \\usepackage{amsmath} \\usepackage{multicol} \n \\begin{document} \n&quot;</span>)</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            tex_string_format_bit = <span class="stringliteral">r&#39;\vert {:0%db} \rangle&#39;</span>%(bit_map[0])</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            f.write(<span class="stringliteral">&quot;\\section{Basis} \\begin{multicols}{2} \n \\noindent &quot;</span>)</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            <span class="keywordflow">for</span> b_key, b_val <span class="keywordflow">in</span> bit_map[1].items():</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                f.write(b_key + <span class="stringliteral">&quot; $\\rightarrow &quot;</span> + tex_string_format_bit.format(b_val) + <span class="stringliteral">&quot;$\\\\ &quot;</span>)</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            f.write(<span class="stringliteral">&quot;\\end{multicols}&quot;</span>)</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            f.write(<span class="stringliteral">&quot;\\noindent\\rule{\\textwidth}{1pt} \n&quot;</span>)</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            f.write(<span class="stringliteral">&quot;\\noindent\\rule{\\textwidth}{1pt} \n&quot;</span>)</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            f.write(<span class="stringliteral">&quot;\\section{Encoding} \n&quot;</span>)</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            <span class="keywordflow">for</span> token, basis_map <span class="keywordflow">in</span> mapping.items():</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                f.write(<span class="stringliteral">r&quot;\begin{align}\vert \textrm{&quot;</span> + token + <span class="stringliteral">&quot;} \\rangle &amp;= \\\\ \n &amp;&quot;</span> )</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                <span class="keywordflow">for</span> i,b <span class="keywordflow">in</span> enumerate(basis_map):</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                    if( i != 0 ):</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                        if(i%3 == 0):</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                            f.write(<span class="stringliteral">r&quot; \\ &amp; &quot;</span>)</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                    f.write(<span class="stringliteral">&quot;{0:.3f}&quot;</span>.format(round(b[0],3)))</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                    f.write(tex_string_format_bit.format(b[1]) )</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                    if(i != len(basis_map) - 1):</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                        f.write(<span class="stringliteral">r&quot;+&quot;</span>)</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                    f.write(<span class="stringliteral">&quot; \\nonumber &quot;</span>)</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                f.write(<span class="stringliteral">r&quot;&quot;&quot;\end{align}&quot;&quot;&quot;</span>)</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                f.write(<span class="stringliteral">&quot;\\noindent\\rule{\\textwidth}{1pt} \n&quot;</span>)</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            f.write(<span class="stringliteral">r&quot;\end{document}&quot;</span>)</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div></div><!-- fragment -->
<p class="reference">References <a class="el" href="a00104_source.html#l00238">QNLP.proc.DisCoCat.DisCoCat.generate_state_mapping()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="a00859_a8e7857535e1ff978530dbde402ab77dd_cgraph.png" border="0" usemap="#a00859_a8e7857535e1ff978530dbde402ab77dd_cgraph" alt=""/></div>
<map name="a00859_a8e7857535e1ff978530dbde402ab77dd_cgraph" id="a00859_a8e7857535e1ff978530dbde402ab77dd_cgraph">
<area shape="rect"  title=" " alt="" coords="5,5,195,47"/>
<area shape="rect"  href="a00859.html#af9294e7290c3b52fd43563aea1fdae3d" title=" " alt="" coords="243,5,436,47"/>
</map>
</div>

</div>
</div>
<a id="a6f8112d1c5eebf8543f9d5b1017d3b0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f8112d1c5eebf8543f9d5b1017d3b0a">&#9670;&nbsp;</a></span>load_corpus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def QNLP.proc.DisCoCat.DisCoCat.load_corpus </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>corpus_path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00104_source.html#l00103">103</a> of file <a class="el" href="a00104_source.html">DisCoCat.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keyword">def </span><a class="code" href="a00204.html#a87fc06912391fb540b90e561eec6cbaa">load_corpus</a>(self, corpus_path):</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keywordflow">return</span> pc.load_corpus(corpus_path)</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    </div><div class="ttc" id="a00204_html_a87fc06912391fb540b90e561eec6cbaa"><div class="ttname"><a href="a00204.html#a87fc06912391fb540b90e561eec6cbaa">QNLP.proc.process_corpus.load_corpus</a></div><div class="ttdeci">def load_corpus(corpus_path, proc_mode=0)</div><div class="ttdef"><b>Definition:</b> <a href="a00113_source.html#l00065">process_corpus.py:65</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2595a186c32d0e3ba273c772a98cddf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2595a186c32d0e3ba273c772a98cddf0">&#9670;&nbsp;</a></span>map_to_basis()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def QNLP.proc.DisCoCat.DisCoCat.map_to_basis </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dict&#160;</td>
          <td class="paramname"><em>corpus_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">list&#160;</td>
          <td class="paramname"><em>basis</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>basis_dist_cutoff</em> = <code>10</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>distance_func</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>from multimethod import multimethod #Allow multiple dispatch </p>
<pre class="fragment">Maps the words from the corpus into the chosen basis.         
Returns word_map dictionary, mapping corpus tokens -&gt; basis states

Keyword arguments:
corpus_list         --  List of tokens representing corpus
basis               --  List of basis tokens
basis_dist_cutoff   --  Cut-off for token distance from basis for it to be significant
distance_func       --  Function accepting distance between basis and token, and
                returning the resulting scaling. If 'None', defaults to 
                1/coeff for scaling param
</pre> 
<p class="definition">Definition at line <a class="el" href="a00104_source.html#l00148">148</a> of file <a class="el" href="a00104_source.html">DisCoCat.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keyword">def </span>map_to_basis(self, corpus_list : dict, basis : list, basis_dist_cutoff=10, distance_func=<span class="keywordtype">None</span>):</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="stringliteral">        Maps the words from the corpus into the chosen basis.         </span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="stringliteral">        Returns word_map dictionary, mapping corpus tokens -&gt; basis states</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="stringliteral"></span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="stringliteral">        Keyword arguments:</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="stringliteral">        corpus_list         --  List of tokens representing corpus</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="stringliteral">        basis               --  List of basis tokens</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="stringliteral">        basis_dist_cutoff   --  Cut-off for token distance from basis for it to be significant</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="stringliteral">        distance_func       --  Function accepting distance between basis and token, and</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="stringliteral">                                returning the resulting scaling. If &#39;None&#39;, defaults to </span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="stringliteral">                                1/coeff for scaling param</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="keywordflow">if</span> distance_func == <span class="keywordtype">None</span>:</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            distance_func = self.distance_func <span class="comment">#lambda x : [1.0/(i+1) for i in x]</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        word_map = {}</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;       <span class="comment"># map distance between basis words and other words in token list</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <span class="keywordflow">for</span> word, locations <span class="keywordflow">in</span> corpus_list.items():</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            word_map.update({word : <span class="keywordtype">None</span>})</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <span class="keywordflow">for</span> b_idx, b_val <span class="keywordflow">in</span> enumerate(basis):</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                <span class="comment"># Basis elements are orthogonal</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                if(b_val == word):</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                    word_map.update({b_val : {b_val : 0}})</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                    <span class="keywordflow">break</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                <span class="comment"># to add left-right ordering here, remove the abs and use sign of distance to indicate where words appear relative to one another. </span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                min_dist = np.min(np.abs(locations[1][:, np.newaxis] - corpus_list[b_val][1]))</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                m = (word, b_val, min_dist &lt;= basis_dist_cutoff)</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                <span class="keywordflow">if</span> m[2] != <span class="keyword">False</span>:</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                    if(word_map.get(m[0]) != <span class="keywordtype">None</span>):</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                        update_val = word_map.get(m[0])</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                        update_val.update({m[1] : min_dist})</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                        word_map.update({m[0] : update_val })</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                        word_map.update({m[0] : {m[1] : min_dist} })</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">return</span> word_map</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div></div><!-- fragment -->
<p class="reference">References <a class="el" href="a00104_source.html#l00101">QNLP.proc.DisCoCat.DisCoCat.distance_func</a>.</p>

</div>
</div>
<a id="a55d9ca6751919c22f739d00037be7b1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55d9ca6751919c22f739d00037be7b1c">&#9670;&nbsp;</a></span>map_to_bitstring()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def QNLP.proc.DisCoCat.DisCoCat.map_to_bitstring </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">list&#160;</td>
          <td class="paramname"><em>basis</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00104_source.html#l00227">227</a> of file <a class="el" href="a00104_source.html">DisCoCat.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keyword">def </span>map_to_bitstring(self, basis : list):</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        upper_bound_bitstrings = int(np.ceil(np.log2(len(basis))))</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        bit_map = {}</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        bitstring = 0 <span class="comment"># Assume |0...0&gt; state reserved for initialisation only</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> basis:</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            bitstring += 1</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            bit_map.update({k: bitstring})</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">return</span> (upper_bound_bitstrings, bit_map)</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a27b28891df185baa1a32ce18ab745139"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27b28891df185baa1a32ce18ab745139">&#9670;&nbsp;</a></span>nvn_distances()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def QNLP.proc.DisCoCat.DisCoCat.nvn_distances </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dict&#160;</td>
          <td class="paramname"><em>corpus_list_n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dict&#160;</td>
          <td class="paramname"><em>corpus_list_v</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dist_cutoff</em> = <code>2</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>distance_func</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">This function matches the NVN sentence structure, by locating adjacent
nouns and verbs, following the same procedure as used to map corpus words 
onto the basis. With this, we can construct relationships between the
verbs and their subject/object nouns.</pre> 
<p class="definition">Definition at line <a class="el" href="a00104_source.html#l00188">188</a> of file <a class="el" href="a00104_source.html">DisCoCat.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keyword">def </span>nvn_distances(self, corpus_list_n : dict, corpus_list_v : dict, dist_cutoff=2, distance_func=<span class="keywordtype">None</span>):</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;This function matches the NVN sentence structure, by locating adjacent</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="stringliteral">        nouns and verbs, following the same procedure as used to map corpus words </span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="stringliteral">        onto the basis. With this, we can construct relationships between the</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="stringliteral">        verbs and their subject/object nouns.&quot;&quot;&quot;</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">if</span> distance_func == <span class="keywordtype">None</span>:</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            distance_func = self.distance_func <span class="comment">#lambda x : [1.0/(i+1) for i in x]</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        word_map = {}</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;       <span class="comment"># map distance between words</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="keywordflow">for</span> word_v, locations_v <span class="keywordflow">in</span> corpus_list_v.items():</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <span class="keywordflow">for</span> word_n, locations_n <span class="keywordflow">in</span> corpus_list_n.items():</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                <span class="keyword">from</span> IPython <span class="keyword">import</span> embed; embed()</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                dists = locations_n[1][:, np.newaxis] - locations_v[1]</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                <span class="keywordflow">if</span> any([np.abs(x) &lt;= dist_cutoff <span class="keywordflow">for</span> x <span class="keywordflow">in</span> dists]):</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                    print(<span class="stringliteral">&quot;Pattern between {} and {}&quot;</span>.format(word_n, word_v))</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                <span class="keywordflow">continue</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                if(0):<span class="comment"># if dist between v and noun is negative, order 1, if positive, order 2</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                    word_map.update({word : <span class="keywordtype">None</span>})</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                <span class="comment"># to add left-right ordering here, remove the abs and use sign of distance to indicate where words appear relative to one another. </span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                min_dist = np.min(np.abs(locations[1][:, np.newaxis] - corpus_list[b_val][1]))</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                m = (word, b_val, min_dist &lt;= basis_dist_cutoff)</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                <span class="keywordflow">if</span> m[2] != <span class="keyword">False</span>:</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                    if(word_map.get(m[0]) != <span class="keywordtype">None</span>):</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                        update_val = word_map.get(m[0])</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                        update_val.update({m[1] : min_dist})</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                        word_map.update({m[0] : update_val })</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                    <span class="keywordflow">else</span>:</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                        word_map.update({m[0] : {m[1] : min_dist} })</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        <span class="keywordflow">return</span> word_map          </div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div></div><!-- fragment -->
<p class="reference">References <a class="el" href="a00104_source.html#l00101">QNLP.proc.DisCoCat.DisCoCat.distance_func</a>.</p>

</div>
</div>
<a id="a548c331a9e1989983fe90f540388d8de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a548c331a9e1989983fe90f540388d8de">&#9670;&nbsp;</a></span>tokenise_corpus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def QNLP.proc.DisCoCat.DisCoCat.tokenise_corpus </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>corpus_text</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00104_source.html#l00106">106</a> of file <a class="el" href="a00104_source.html">DisCoCat.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keyword">def </span>tokenise_corpus(self, corpus_text):</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <span class="keywordflow">return</span> pc.tokenize_corpus(corpus_text)</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<a id="a79ae71fef806455de230891bc588095b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79ae71fef806455de230891bc588095b">&#9670;&nbsp;</a></span>word_occurrence()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def QNLP.proc.DisCoCat.DisCoCat.word_occurrence </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">list&#160;</td>
          <td class="paramname"><em>corpus_list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Counts word occurrence in a given corpus, presented as a tokenised word list.
Returns a dictionary with keys as the tokens and values as the occurrences.
</pre> 
<p class="definition">Definition at line <a class="el" href="a00104_source.html#l00111">111</a> of file <a class="el" href="a00104_source.html">DisCoCat.py</a>.</p>
<div class="fragment"><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keyword">def </span>word_occurrence(self, corpus_list : list):</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="stringliteral">&quot;&quot;&quot;</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="stringliteral">        Counts word occurrence in a given corpus, presented as a tokenised word list.</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="stringliteral">        Returns a dictionary with keys as the tokens and values as the occurrences.</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="stringliteral">        &quot;&quot;&quot;</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        word_dict = {}</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keywordflow">for</span> word <span class="keywordflow">in</span> corpus_list:</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            <span class="keywordflow">if</span> word <span class="keywordflow">in</span> word_dict:</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                word_dict[word] += 1</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <span class="keywordflow">else</span>:</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                word_dict[word] = 1</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="keywordflow">return</span> word_dict</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a id="a72bda5e9e7a69b86b6e303283438dd13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72bda5e9e7a69b86b6e303283438dd13">&#9670;&nbsp;</a></span>distance_func</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QNLP.proc.DisCoCat.DisCoCat.distance_func</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="a00104_source.html#l00101">101</a> of file <a class="el" href="a00104_source.html">DisCoCat.py</a>.</p>

<p class="reference">Referenced by <a class="el" href="a00104_source.html#l00238">QNLP.proc.DisCoCat.DisCoCat.generate_state_mapping()</a>, <a class="el" href="a00104_source.html#l00148">QNLP.proc.DisCoCat.DisCoCat.map_to_basis()</a>, and <a class="el" href="a00104_source.html#l00188">QNLP.proc.DisCoCat.DisCoCat.nvn_distances()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/Users/mlxd/Desktop/intel-qnlp-rc2/modules/py/pkgs/QNLP/proc/<a class="el" href="a00104_source.html">DisCoCat.py</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a00186.html">QNLP</a></li><li class="navelem"><a class="el" href="a00199.html">proc</a></li><li class="navelem"><a class="el" href="a00201.html">DisCoCat</a></li><li class="navelem"><a class="el" href="a00859.html">DisCoCat</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
